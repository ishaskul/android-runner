'use strict';mix_d("AmazonHomepageSolitaireCards__desktop-tall-hero-video:desktop-tall-hero-video__L8qfwtJs","exports tslib @c/scoped-dom @c/dom @c/pagemarker @p/videojs @p/jQuery @c/metrics @p/gw-video-orchestrator @c/logger @p/gw-desktop-herotator @p/A".split(" "),function(A,x,D,E,F,G,H,t,I,J,K,L){function r(b){return b&&"object"===typeof b&&"default"in b?b:{"default":b}}var M=r(D),N=r(E),O=r(F),u=r(G),y=r(H),z=r(I),P=r(J),v=r(K),Q=r(L),q=function(b,a){void 0===a&&(a=1);t.count(b,+(t.count(b)||
0)+a)},R=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=16*Math.random()|0;return("x"===b?a:a&3|8).toString(16)})},S=function(b,a){var c="gw-"+b+"-",d=function(e,f){t.count(c+e,f)};(function(){a.on("tracking:first-quarter",function(){return d("firstQuarter",1)});a.on("tracking:second-quarter",function(){return d("midpoint",1)});a.on("tracking:third-quarter",function(){return d("thirdQuarter",1)});a.on("tracking:fourth-quarter",function(){return d("completed",
1)});a.on("tracking:duration",function(e,f){return d("viewDuration",f.lastTimeUpdate)})})();(function(){a.on("tracking:buffered",function(e,f){q(c+"bufferCount",f.bufferCount);q(c+"bufferTime",f.secondsToLoad)})})();(function(){a.on("tracking:firstplay",function(e,f){return d("firstPlay",f.secondsToLoad)});a.on("tracking:replay",function(){q(c+"replay",void 0)});a.on("tracking:pause",function(){q(c+"paused",void 0)});a.on("tracking:fullscreen",function(){q(c+"fullscreen",void 0)});a.on("tracking:seek",
function(e,f){return d("seek",f.seekCount)});a.on("volumechange",function(){var e=a.muted()?"audioMuted":"audioUnmuted";q(c+e,void 0)})})();(function(){a.on("tracking:firstend",function(e,f){d("droppedVideoFrames",f.droppedVideoFrames);d("droppedVideoFramesPerSecs",f.droppedVideoFramesPerSecs)})})()},B=function(b,a){"function"===typeof t.uet&&t.uet(b,a,{wb:1});"function"===typeof t.uex&&t.uex("ld",a,{wb:1})},T=function(b){var a=this,c=null,d=!1,e=!1,f=!1,k=!1,g=0,h=!1,l=function(){c&&clearTimeout(c);
k=f=e=d=!1;g=0;h=!1};this.on("dispose",l);this.on("loadstart",l);this.on("ended",l);this.on("pause",function(){f=!1;!a.scrubbing()||b.bufferingConfig&&b.bufferingConfig.includeScrub||(d=!0,c=setTimeout(function(){d=!1},200))});this.on("waiting",function(){!1===f&&!1===d&&0<a.currentTime()&&(f=new Date,e=+a.currentTime().toFixed(0),h=+a.readyState())});this.on("timeupdate",function(){var n=+a.currentTime().toFixed(0);if(f&&n!==e){k=new Date;var m=(k-f)/1E3;e=f=!1;g++;a.trigger("tracking:buffered",
{currentTime:+n,readyState:+h,secondsToLoad:+m.toFixed(3),bufferCount:+g})}})},U=function(b){var a=this,c=0,d=null,e=!1;b=function(){d&&clearTimeout(d);c=0;e=!1};a.on("dispose",b);a.on("loadstart",b);a.on("ended",b);a.on("fullscreenchange",function(){e||(d=setTimeout(function(){c++;a.trigger("tracking:fullscreen",{fullscreenCount:c})},300))})},V=function(b){var a=this,c=0,d=null,e=!1;b=function(){d&&clearTimeout(d);c=0;e=!1};a.on("dispose",b);a.on("loadstart",b);a.on("ended",b);a.on("pause",function(){a.scrubbing()||
e||(d=setTimeout(function(){c++;a.trigger("tracking:pause",{pauseCount:c})},300))})},W=function(b){var a=this,c=!1,d=!1,e=!1,f=0,k=0,g=0,h=0;a.on("dispose",function(){e=d=c=!1;g=k=f=0});a.on("tracking:pause",function(){return k++});a.on("tracking:seek",function(){return g++});a.on("timeupdate",function(){var l=+a.currentTime().toFixed(0),n={seekCount:g,pauseCount:k,currentTime:l,duration:f};l>h&&(h=l,a.trigger("tracking:duration",{lastTimeUpdate:h}));switch(l){case c:c=!1;a.trigger("tracking:first-quarter",
n);break;case d:d=!1;a.trigger("tracking:second-quarter",n);break;case e:e=!1,a.trigger("tracking:third-quarter",n)}});a.on("ended",function(){a.trigger("tracking:fourth-quarter",{seekCount:g,pauseCount:k,currentTime:f,duration:f})});a.on("durationchange",function(){f=+a.duration().toFixed(0);if(0<f){var l=(f/4).toFixed(0);c=+l;d=2*+l;e=3*+l}})},X=function(b){var a=this,c=!1,d=!1,e=!1,f=new Date,k=new Date,g=0,h=0,l=0,n=0,m=function(){c=!1;f=new Date;k=new Date;g=0};a.on("dispose",m);a.on("loadstart",
function(){m();f=new Date});a.on("loadeddata",function(){k=new Date;g=(k.getTime()-f.getTime())/1E3});a.on("playing",function(){c||(c=!0,a.trigger("tracking:firstplay",{secondsToLoad:+g.toFixed(3)}));e&&(e=!1,n++,a.trigger("tracking:replay",{replayCount:n}))});a.on("ended",function(){e=!0;d||(d=!0,h=a.getVideoPlaybackQuality().droppedVideoFrames,l=Number(h/a.duration()),a.trigger("tracking:firstend",{droppedVideoFrames:h,droppedVideoFramesPerSecs:l}))})},Y=function(b){var a=this,c=0,d=!0;b=function(){c=
0;d=!0};a.on("dispose",b);a.on("loadstart",b);a.on("ended",b);a.on("play",function(){d=!1});a.on("pause",function(){if(!d&&a.scrubbing()){var e=+a.currentTime().toFixed(0);c++;a.trigger("tracking:seek",{seekCount:+c,seekTo:e})}})},Z=function(b){V.apply(this,arguments);U.apply(this,arguments);W.apply(this,arguments);X.apply(this,arguments);Y.apply(this,arguments);T.apply(this,arguments)},aa=["slow-2g","2g"],ba=function(){var b=!1,a=navigator.connection;a&&a.effectiveType&&(b=aa.includes(a.effectiveType));
b&&q("autoplaydisabled:SlowConnection");return b},ca=function(){var b=matchMedia&&matchMedia("(prefers-reduced-motion: reduce)").matches;b&&q("autoplaydisabled:PrefersReducedMotion");return b},ea=function(b,a){void 0===a&&(a=50);var c=!1,d=!1,e=b.player;e.on("play",function(){c=!0;d=!1});z["default"].subscribe(b.videoContainer,function(f){if(f){var k=b.player;b.autoplayEnabled&&k.paused()&&(k.hasStarted()||(d=!1),c?(d||b.loopEnabled)&&k.play():da(b))}else e.paused()||(e.pause(),d=!0);b.isLeader=f},
{priority:a});e.on("play",function(){z["default"].elect(b.videoContainer)});e.on("ended",function(){b.isLeader&&z["default"].elect()})},fa=function(b){return new Promise(function(a){if(4<=b.readyState())a(!0);else b.on("canplaythrough",function(){a(!0)})})},da=function(b){fa(b.player).then(function(){return b.player.play()||Promise.resolve()}).then(function(){q("autoplaysuccess");B("cf",b.cardName+"ClickToFirstFrame")}).catch(function(a){"NotAllowedError"===a.name?q("autoplayfailed:"+a.name):P["default"].log(b.cardName+
":autoplayfailed, "+a.toString(),"WARN");q("autoplayfailed")})},ha=function(){},ja=function(b,a,c,d){return x.__awaiter(void 0,void 0,void 0,function(){var e;return x.__generator(this,function(f){switch(f.label){case 0:return e=c?Promise.resolve():O["default"].visible(200),[4,e];case 1:return f.sent(),[2,ia(b,a,d)]}})})},ia=function(b,a,c){void 0===c&&(c=N["default"].cardRoot);if(null!==u["default"]||void 0!==u["default"]){var d=c.getElementsByClassName("_desktop-tall-hero-video_style_poster-image__2ST1q")[0].src,
e=c.getElementsByClassName("_desktop-tall-hero-video_style_video-container__3ojO1")[0],f=JSON.parse(e.dataset.videoDataset);c=c.getElementsByClassName("_desktop-tall-hero-video_style_cta-link__25RUl")[0];var k=b+"-"+R();e.innerHTML='<video id="'+k+"\" class='video-js "+a.skinName+'\' crossorigin="anonymous" muted>\n                <source src="'+f.videoUrl+'" type="video/mp4"/>\n                '+ka(f.textTrack)+"\n            </video>";"undefined"===typeof u["default"].getPlugin("eventTracking")&&
u["default"].registerPlugin("eventTracking",Z);var g=la(k,d,f.endImageSource,c,a,f.language,f.loop,f.aspectRatio),h={player:g,videoContainer:e,cardName:b,autoplayEnabled:f.autoplayEnabled&&!(ba()||ca()),loopEnabled:f.loop,isLeader:!1,resetVideo:function(){g.hasStarted()&&(g.poster(d),g.currentTime(0),g.hasStarted(!1))}},l=function(){return new Promise(function(p){if(0===g.readyState()){g.one("loadedmetadata",function(){g.paused()||(g.currentTime(0),g.pause(),g.hasStarted(!1));p(!0)});var w=g.play();
w&&w.catch(ha)}else p(!0)})},n=function(){return new Promise(function(p){if(3<=g.readyState())p(!0);else g.on("canplay",function(){p(!0)})})},m=function(){return new Promise(function(p){e.classList.add("_desktop-tall-hero-video_style_show-video__1gei2");B("cf",b+"ClickToVideoLoad");p(!0)})};g.ready(function(){l().then(n).then(m).then(function(){return ea(h,f.priority)}).catch(function(p){q("InitVideoFailed")})});S(b,g);return h}},ka=function(b){return"NO_TEXT_TRACK"===b?"":'<track kind="captions" src="'+
b+'" default>'},la=function(b,a,c,d,e,f,k,g){a=y["default"].extend({},{poster:a,language:f,loop:k,aspectRatio:g,plugins:{eventTracking:!0},nativeControlsForTouch:!1,preload:"auto",userActions:{doubleClick:!1},hls:{overrideNative:!0},html5:{nativeTextTracks:!1},errorDisplay:!1},e.videoJsConfig);var h=u["default"](b,a);h.off("click");h.playsinline(!0);var l=function(m){var p=!1,w=!1;m.target instanceof Element&&(p=1===y["default"](m.target).closest(".vjs-control-bar").length,w=1===y["default"](m.target).closest(".vjs-big-play-button").length);
p||w?m.preventDefault():(h.pause(),d.click())},n=function(m){m.off("tap");m.off("click");m.on("tap",l);m.on("click",l)};h.ready(function(){y["default"](d).bind("click",l);n(h.tech(!0));n(h.posterImage)});h.on("timeupdate",function(){var m=+h.duration().toFixed(0),p=+h.currentTime().toFixed(0);h.poster()!==c&&p>m/2&&h.poster(c)});h.on("ended",function(){h.hasStarted(!1);h.posterImage.show()});return h},na=function(b,a){return new Promise(function(c){setTimeout(function(){(3>b.readyState()||!b.hasStarted())&&
c(!0)},6E3);b.on("ended",function(){c(!0)});a&&ma(b).then(function(){return c(!0)}).catch();b.on("stalled",function(){c(!0)})})},ma=function(b){return new Promise(function(a){var c=0;b.on("timeupdate",function(){var d=b.currentTime();d<c&&a(!0);c=d})})},pa=function(b){oa(b.videoContainer,function(){return na(b.player,b.loopEnabled)},function(){b.isLeader&&z["default"].elect();b.resetVideo()})},oa=function(b,a,c){v["default"].addObserver("animation_complete",function(){return C(b,a,c)});C(b,a,c)},
C=function(b,a,c){if(Q["default"].onScreen(b,0)&&"visible"===getComputedStyle(b).visibility){var d=function(){c();v["default"].removeObserver("page_changed",d)};b=function(){return v["default"].resume()};v["default"].addObserver("page_changed",d);v["default"].pause();a().then(b,b)}};A._operationNames=[];A.card=function(){return x.__awaiter(void 0,void 0,void 0,function(){var b,a,c;return x.__generator(this,function(d){switch(d.label){case 0:b=M["default"].cardRoot.getElementsByClassName("_desktop-tall-hero-video_style_lazy-video-wrapper__WM56t")[0];
d=a=void 0===b.dataset.audioEnabled||"true"===b.dataset.audioEnabled;void 0===d&&(d=!0);var e={controls:!0,fluid:!0,inactivityTimeout:0,controlBar:{children:["playToggle","volumePanel"],volumePanel:{inline:!1}},muted:!0};d||(e.controlBar={children:["playToggle"]});e.bigPlayButton=!1;e.controlBar.playToggle={replay:!0};return[4,ja("desktopTallHeroVideo",{skinName:"_desktop-tall-hero-video_style_video-js-tall-hero-skin__WzPOh",videoJsConfig:e},!0)];case 1:return(c=d.sent())&&pa(c),[2]}})})}});
