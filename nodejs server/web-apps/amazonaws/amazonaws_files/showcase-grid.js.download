define("librastandardlib/test-helpers/browser-globals/window",[],function(){return window});define("librastandardlib/event-utils/debounceWindowEvent",["librastandardlib/test-helpers/browser-globals/window"],function(window){"use strict";return function debounceWindowEvent(fct,eventName,timeout,context){var that=context||this,count=0;$(window).on(eventName,function(){var id=++count;window.setTimeout(function(){if(id===count){fct.call(that)}},timeout)})}});define("librastandardlib/obj-utils/assign",[],function(){return function assign(target,args){"use strict";if(target===null){throw new TypeError("Cannot convert undefined or null to object")}var to=Object(target);for(var i=1;i<arguments.length;i++){var source=arguments[i];if(source!==null){for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){to[key]=source[key]}}}}return to}});define("librastandardlib/aws/page-settings",["librastandardlib/obj-utils/assign"],function(_assign){"use strict";var defaults={staticAssetPath:"https://a0.awsstatic.com",jsAssetPath:"https://a0.awsstatic.com/libra/1",isLoggingEnabled:true};var PageSettings={};if(typeof AWS==="object"&&typeof AWS.PageSettings==="object"){_assign(PageSettings,AWS.PageSettings)}var tagSettings=document.getElementsByTagName("html")[0].dataset;if(tagSettings){PageSettings.staticAssetPath=tagSettings.staticAssets;PageSettings.jsAssetPath=PageSettings.staticAssetPath+"/libra/"+tagSettings.jsVersion}PageSettings=_assign({},defaults,PageSettings);if(typeof AWS==="object"&&typeof AWS.PageSettings==="object"){AWS.PageSettings=PageSettings}return PageSettings});define("libra-cardsui/cards-ui",["librastandardlib/event-utils/debounceWindowEvent","librastandardlib/aws/page-settings"],function(debounceWindowEvent,PageSettings){var defaults={cardFrontSelector:".aws-card-front",cardBackSelector:".aws-card-back",cardBackInnerSelector:".aws-card-back-inner",cardContainerSelector:".aws-directories-container",cardContentSelector:".aws-card-content",cardItemSelector:".aws-card-item",copyContainerSelector:".aws-directories-container-copy",cardWrapperSelector:".aws-directories-wrapper",triggerAnchorSelector:".aws-card-trigger-anchor",triggerExpandSelector:".aws-card-trigger-expand",triggerHideSelector:".aws-card-trigger-hide",hiddenClass:"aws-card-hidden",flippedClass:"aws-card-flipped",navArrowClass:".lb-cards-next, .lb-cards-prev",scrollNavClass:".lb-cards-nav",clickEvent:"click.aws-directories-cards",resizeEvent:"resize.aws-directories-cards",triggerOffset:43,sideScrollAnimationDuration:1e3,hasBack:false};var CardsUI=function(elem,options){this.$elem=$(elem);this.options=$.extend({},defaults,options);this.tallestContentHeight=0;this.backTopPosition=0};CardsUI.prototype={setUp:function(){this.setCardHeight();this.setBackTopPosition();this.applyBackTopPosition();this.setNavScrollDimension()},setCardHeight:function(){this.tallestContentHeight=this.getMaxContentHeight();this.$elem.find(this.options.cardContentSelector).css("height",this.tallestContentHeight);if(this.options.hasBack){this.$elem.find(this.options.cardBackSelector).css("height",this.tallestContentHeight)}this.handleNavScroll()},handleNavScroll:function(){if(this.$elem.hasClass("lb-side-scroll")){this.setNavScrollDimension();this.scrollCards()}},setNavScrollDimension:function(){var navWidth=Math.round(this.$elem.find(this.options.cardItemSelector).outerWidth()/2);var navHeight=this.$elem.find(this.options.cardContainerSelector).height()-parseInt($(this.$elem.find(".aws-card-item")[0]).css("margin-bottom"))+this.getBoxShadowYOffset();this.$elem.find(this.options.scrollNavClass).height(Math.round(navHeight));this.$elem.find(this.options.navArrowClass).width(navWidth)},getBoxShadowYOffset:function(){if(this.$elem.find(".aws-card-content").length>0&&this.$elem.find(".aws-card-content").css("box-shadow")!=="none"){var boxShadowVals=this.$elem.find(".aws-card-content").css("box-shadow").match(/rgba?\([0-9]+, [0-9]+, [0-9]+\) -?[0-9]+px -?[0-9]+px -?[0-9]+px -?[0-9]+px/g);return boxShadowVals.reduce(function(total,val){return total+parseInt(val.replace(/rgba?\(.*\) (.*)px (.*)px (.*)px (.*)px/g,"$2"))},0)}return 0},scrollCards:function(){var isCardsAppended=this.$elem.find(this.options.cardContainerSelector).index()!==0;if(this.$elem.find(this.options.cardWrapperSelector).length!==0){var scrollDirection=PageSettings.isRTL?"right":"left";this.$elem.find(this.options.cardWrapperSelector).css(scrollDirection,isCardsAppended?"-100%":"0%");setTimeout(function(){this.$elem.find(this.options.copyContainerSelector).remove();this.$elem.find(this.options.cardContainerSelector).unwrap();this.$elem.find(this.options.navArrowClass).css({"pointer-events":"auto"})}.bind(this),this.options.sideScrollAnimationDuration)}},getMaxContentHeight:function(){var maxHeight=0;var $cardFront=this.$elem.find(this.options.cardFrontSelector);var $cardContent;if(this.options.hasBack){var $cardBack=this.$elem.find(this.options.cardBackInnerSelector);$cardContent=$cardFront.add($cardBack)}else{$cardContent=$cardFront}$cardContent.each(function(){maxHeight=Math.max(maxHeight,$(this).outerHeight())});return maxHeight},setBackTopPosition:function(){this.backTopPosition=this.tallestContentHeight-this.options.triggerOffset},applyBackTopPosition:function(){var that=this;this.$elem.find(this.options.cardContentSelector).each(function(){var $cardContent=$(this);if(!$cardContent.hasClass(that.options.flippedClass)){$cardContent.find(that.options.cardBackSelector).css("top",that.backTopPosition+"px")}})},bindClickHandler:function(){var that=this;this.$elem.on(that.options.clickEvent,that.options.triggerAnchorSelector,function(e){that.slideCard($(e.target))})},bindResizeHandler:function(){debounceWindowEvent(this.setUp,this.options.resizeEvent,10,this)},slideCard:function($target){var $targetCard=$target.parents(this.options.cardContentSelector);var $expandText=$targetCard.find(this.options.triggerExpandSelector);var $hideText=$targetCard.find(this.options.triggerHideSelector);var $cardBack=$targetCard.find(this.options.cardBackSelector);var isFlipped=$targetCard.hasClass(this.options.flippedClass);if(isFlipped){$cardBack.css({top:this.backTopPosition+"px"})}else{$cardBack.css({top:"0"})}$targetCard.toggleClass(this.options.flippedClass,!isFlipped);$expandText.toggleClass(this.options.hiddenClass,!isFlipped);$hideText.toggleClass(this.options.hiddenClass,isFlipped)}};return CardsUI});define("librastandardlib/event-utils/triggerCustomEvent",[],function(){"use strict";function triggerCustomEvent(evt,data,elem){elem=elem||document;var e;if(typeof window.CustomEvent==="function"){e=new CustomEvent(evt,{detail:data})}else{e=document.createEvent("CustomEvent");e.initCustomEvent(evt,false,false,data)}elem.dispatchEvent(e)}return triggerCustomEvent});define("libra-cardsui/cards-ui-handler",["libra-cardsui/cards-ui","librastandardlib/event-utils/triggerCustomEvent"],function(CardsUI,triggerCustomEvent){var CardsUIHandler={init:function(elem,options){this.$elem=$(elem);this.options=options||{};this.cardsUI=new CardsUI(this.$elem,this.options)},bindDataLoadEvent:function(setupFunction){this.$elem.on(this.options.eventDataLoad,function(){if(typeof setupFunction==="function"){setupFunction()}})},bindVisibilityEvent:function(setCardHeightFn){if(this.$elem.closest(".lb-visibility-change")){$(this.$elem.closest(".lb-visibility-change")).one("custom_lb_visibility_change",function(e){if(typeof setCardHeightFn==="function"){setCardHeightFn()}}.bind(this))}},getCardsUI:function(){return this.cardsUI}};return CardsUIHandler});define("libra-cardsui/themes/showcase-grid",["libra-cardsui/cards-ui-handler"],function(CardsUIHandler){var defaults={hasBack:false};var Showcase=function(elem,options){this.options=$.extend({},defaults,options);CardsUIHandler.init(elem,this.options);this.cardsUI=CardsUIHandler.getCardsUI();CardsUIHandler.bindDataLoadEvent(function(){this.cardsUI.handleNavScroll()}.bind(this));CardsUIHandler.bindVisibilityEvent(function(){this.cardsUI.handleNavScroll()}.bind(this))};return Showcase});